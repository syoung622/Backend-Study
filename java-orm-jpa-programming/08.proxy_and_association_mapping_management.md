### 프록시와 연관 관계 관리

#### 프록시

#### 즉시 로딩과 지연 로딩

- 지연 로딩 LAZY을 사용해서 프록시로 조회
    - `@ManyToOne(fetch = FetchType.LAZY)`
    - 해당 객체를 사용하는 시점에 프록시 객체가 초기화되어 값을 가져옴.


- 즉시 로딩 EAGER를 사용해서 함께 조회
    - `@ManyToOne(fetch = FetchType.EAGER)`
    - 두 객체를 함께 조회하는 경우가 많은 경우, join을 통해 바로 값을 가져옴.


##### 프록시와 즉시로딩 주의

- 가급적 실무에서는 지연 로딩만 사용
- 즉시 로딩 적용하면 예상치 못한 SQL 발생
- 즉시 로딩은 JPQL에서 N+1 분제 발생
- `@ManyToOne`, `@OneToOne`은 기본적으로 즉시 로딩
- `@OneToMany`, `@ManyToMany`는 기본적으로 지연 로딩

#### N+1 해결책

- 지연로딩 설정, 가져와야하는 엔티티를 fetch join을 사용해서 가져옴.

#### 영속성 전이(CASCADE)와 고아 객체

- 연관된 엔티티도 함께 영속 상태로 만들 때 사용.
- 전이될 대상이 한 군데만 사용될 때 활용할 것을 권장

- 고아 객체: 부모 엔티티와 연관관계가 끊어진 자식 엔티티 자동 삭제
