### 빈 생명주기 콜백

어플리케이션 시작할 시 DB, 소켓 등 미리 연결
어플리케이션 종료 시 객체의 초기화 및 종료 작업 필요

#### 스프링 빈 라이프 사이클

- 객체 생성 -> 의존관계 주입
- 의존관계 주입 완료 후 빈 초기화 작업
  - 스프링 : 의존관계 주입 완료 시점을 알 수 있도록 콜백 메서드를 통한 초기화 시점 알림 기능 제공

##### 스프링 빈 이벤트 라이프 사이클
스프링 컨테이너 생성 -> 스프링 빈 생성 -> 의존관계 주입 -> 초기화 콜백 -> 사용 -> 소멸전 콜백 -> 스프링 종료

- 초기화 콜백: 빈 생성, 빈 의존관계 주입 완료 후 호출
- 소멸전 콜백: 빈 소멸되기 직전 호출
  
> 객체의 생성과 초기화 분리
> 생성자 : 정보를 받아 메모리 할당 후 객체 생성하는 책임
> 초기화 : 생성된 값들을 이용하여 작업
> 생성과 초기화를 명확히 분리 필요

> 싱글톤 빈은 스프링 컨테이너가 종료될 때 같이 종료 -> 스프링 컨테이너 종료 직전 소멸전 콜백 호출
> 생명주기가 짧은 빈들 -> 스프링 컨테이너와 무관하게 소멸전 콜백 호출


#### 스프링 빈 생명주기 콜백 관리 방법
- 인터페이스(InitializingBean, DisposableBean)
- 설정 정보에 초기화 메서드, 종료 메서드 지정(어노테이션)
- @PostConstructor, @PreDestroy 사용


#### 인터페이스 InitializingBean, DisposableBean

- **`InitializingBean`**: afterPropertiesSet()으로 초기화 지원
- **`DisposableBean`**: destroy()로 소멸 지원
- 두 메서드만 오버라이딩하여 편리하지만, 스프링 전용 인터페이스이므로 해당 인터페이스에 의존
- 두 인터페이스에서 제공하는 메서드 오버라이딩이므로 이름 변경 불가, 외부 라이브러리에 적용 불가


#### 빈 등록 초기화, 소멸 메서드

- `@Bean`으로 빈 등록 초기화, 소멸 메서드를 지정

  `@Bean(initMethod = "초기화메서드명", destroyMethod = "소멸메서드명")`

- 메서드 이름 지정 가능
- 스프링에 의존하지 않음.
- 설정 정보를 이용하므로 외부 라이브러리에도 적용 가능


#### 종료 메서드 추론

- `destroyMethod`: `@Bean`의 소멸메서드를 지정하는 속성(추론 기능)
- 주로 `close`, `shutdown`으로 소멸 메서드 사용
  - default로 inferred(추론)로 등록
  - `close`, `shutdown` 메서드를 자동 호출
- 추론 기능 사용하지 않을 경우: 공백("")지정


#### 어노테이션 @PostConstruct, @PreDestroy

- 가장 편하며 최신 스프링에서 권장하는 방법
- `@PostConstruct`: 초기화 메서드 지정
- `@PreDestroy`: 소멸 메서드 지정
- javax.annotation.PostConstruct 패키지로 스프링에 종속된 기술이 아님
- 컴포넌트 스캔과 어울림
- 외부 라이브러리에는 적용 불가.(변경 불가임)
  - `@Bean`을 이용하면 해결 가능